(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-07508837"],{"89dd":function(t,e,n){"use strict";n.d(e,"g",(function(){return o})),n.d(e,"c",(function(){return a})),n.d(e,"e",(function(){return s})),n.d(e,"d",(function(){return i})),n.d(e,"a",(function(){return u})),n.d(e,"f",(function(){return c})),n.d(e,"h",(function(){return l})),n.d(e,"i",(function(){return d}));var r=n("b775"),o=function(t){return Object(r["a"])({method:"POST",url:"/app/v1_0/authorizations",data:t})},a=function(t){return Object(r["a"])({method:"GET",url:"/app/v1_0/sms/codes/".concat(t)})},s=function(){return Object(r["a"])({method:"GET",url:"/app/v1_0/user"})},i=function(){return Object(r["a"])({method:"GET",url:"/app/v1_0/user/channels"})},u=function(t){return Object(r["a"])({method:"POST",url:"/app/v1_0/user/followings",data:{target:t}})},c=function(){return Object(r["a"])({method:"GET",url:"/app/v1_0/user/profile"})},l=function(t){return Object(r["a"])({method:"PATCH",url:"/app/v1_0/user/photo",data:t})},d=function(t){return Object(r["a"])({method:"PATCH",url:"/app/v1_0/user/profile",data:t})}},"9ed6":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login"},[n("van-nav-bar",{attrs:{title:"登录"}}),n("ValidationObserver",{ref:"form"},[n("ValidationProvider",{attrs:{name:"手机号",rules:"required"}},[n("van-field",{attrs:{label:"手机号",placeholder:"请输入手机号"},model:{value:t.userName.mobile,callback:function(e){t.$set(t.userName,"mobile",e)},expression:"userName.mobile"}},[n("i",{staticClass:"iconfont icon-phone_icon",attrs:{slot:"left-icon"},slot:"left-icon"})])],1),n("ValidationProvider",{attrs:{name:"验证码",rules:"required"}},[n("van-field",{attrs:{label:"验证码",placeholder:"请输入6位验证码"},model:{value:t.userName.code,callback:function(e){t.$set(t.userName,"code",e)},expression:"userName.code"}},[n("i",{staticClass:"iconfont icon-mima",attrs:{slot:"left-icon"},slot:"left-icon"}),t.isCountDownShow?n("van-count-down",{attrs:{slot:"button",time:6e4,format:" ss s"},on:{finish:function(e){t.isCountDownShow=!1}},slot:"button"}):n("van-button",{attrs:{slot:"button",size:"small",type:"primary"},on:{click:t.onSendSmsCode},slot:"button"},[t._v(" 发送验证码 ")])],1)],1)],1),n("div",{staticClass:"btn"},[n("van-button",{attrs:{type:"info"},on:{click:t.onLogin}},[t._v("登录")])],1)],1)},o=[],a=(n("96cf"),n("1da1")),s=n("89dd"),i=n("7bb1"),u={name:"loginPage",components:{},props:{},data:function(){return{userName:{mobile:"13911111111",code:"246810"},isCountDownShow:!1}},methods:{onLogin:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e,n,r,o,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.userName,t.next=3,this.$refs.form.validate();case 3:if(n=t.sent,n){t.next=7;break}return setTimeout((function(){var t=a.$refs.form.errors;for(var e in t){var n=t[e];if(n[0])return void a.$toast(n[0])}}),100),t.abrupt("return");case 7:return this.$toast.loading({duration:0,message:"登录中...",forbidClick:!0}),t.prev=8,t.next=11,Object(s["g"])(e);case 11:r=t.sent,console.log(r),this.$store.commit("setUser",r.data.data),this.$toast.success("登录成功"),o=this.$route.query.redirect||"/",this.$router.push(o),t.next=22;break;case 19:t.prev=19,t.t0=t["catch"](8),this.$toast.fail("手机号或验证码错误");case 22:case"end":return t.stop()}}),t,this,[[8,19]])})));function e(){return t.apply(this,arguments)}return e}(),onSendSmsCode:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.userName.mobile,t.next=3,Object(i["d"])(e,"required|mobile",{name:"手机号"});case 3:if(n=t.sent,n.valid){t.next=7;break}return this.$toast(n.errors[0]),t.abrupt("return");case 7:return t.prev=7,this.isCountDownShow=!0,t.next=11,Object(s["c"])(e);case 11:t.next=21;break;case 13:if(t.prev=13,t.t0=t["catch"](7),console.log(t.t0),this.isCountDownShow=!1,429!==t.t0.response.status){t.next=20;break}return this.$toast("请勿频繁发送"),t.abrupt("return");case 20:this.$toast("发送失败");case 21:case"end":return t.stop()}}),t,this,[[7,13]])})));function e(){return t.apply(this,arguments)}return e}()}},c=u,l=(n("d3fa"),n("2877")),d=Object(l["a"])(c,r,o,!1,null,"1851d865",null);e["default"]=d.exports},c5ea:function(t,e,n){},d3fa:function(t,e,n){"use strict";var r=n("c5ea"),o=n.n(r);o.a}}]);
//# sourceMappingURL=chunk-07508837.09c16357.js.map